{"ast":null,"code":"var _jsxFileName = \"/Users/TT/Documents/Vscode/\\u7DF4\\u7FD2/mongodbdemo_frontend/mongodbfrontend/src/components/UpdateStudentForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { findBySid, updateStudentById } from \"../services/api\"; // 引入封裝好的 API 方法\nimport \"./styles.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UpdateStudentForm = () => {\n  _s();\n  const [sid, setSid] = useState(\"\");\n  const [student, setStudent] = useState(null);\n  const [showPopup, setShowPopup] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [formData, setFormData] = useState({\n    userName: \"\",\n    sid: \"\",\n    name: \"\",\n    department: \"\",\n    grade: \"\",\n    class: \"\",\n    Email: \"\",\n    absences: \"\"\n  });\n  const handleQuery = async () => {\n    try {\n      const data = await findBySid(sid);\n      if (data) {\n        setStudent(data);\n        setFormData({\n          userName: data.userName || \"\",\n          sid: data.sid || \"\",\n          name: data.name || \"\",\n          department: data.department || \"\",\n          grade: data.grade || \"\",\n          class: data.class || \"\",\n          Email: data.Email || \"\",\n          absences: data.absences || 0\n        });\n        setShowPopup(true);\n        setMessage(\"\");\n      } else {\n        setMessage(\"查無此座號，請確認後再試！\");\n      }\n    } catch (error) {\n      setMessage(\"查詢失敗，請稍後再試！\");\n    }\n  };\n  const handleUpdate = async () => {\n    try {\n      const updatedData = {\n        id: student._id,\n        ...formData\n      };\n      await updateStudentById(updatedData);\n      setMessage(\"學生資料更新成功！\");\n      setShowPopup(false);\n    } catch (error) {\n      setMessage(\"更新失敗，請稍後再試！\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n_s(UpdateStudentForm, \"dwNAHwqzWE/zqciKP0X6+t+ATZM=\");\n_c = UpdateStudentForm;\nexport default UpdateStudentForm;\nvar _c;\n$RefreshReg$(_c, \"UpdateStudentForm\");","map":{"version":3,"names":["React","useState","findBySid","updateStudentById","jsxDEV","_jsxDEV","UpdateStudentForm","_s","sid","setSid","student","setStudent","showPopup","setShowPopup","message","setMessage","formData","setFormData","userName","name","department","grade","class","Email","absences","handleQuery","data","error","handleUpdate","updatedData","id","_id","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/TT/Documents/Vscode/練習/mongodbdemo_frontend/mongodbfrontend/src/components/UpdateStudentForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { findBySid, updateStudentById } from \"../services/api\"; // 引入封裝好的 API 方法\nimport \"./styles.css\";\n\nconst UpdateStudentForm = () => {\n    const [sid, setSid] = useState(\"\");\n    const [student, setStudent] = useState(null);\n    const [showPopup, setShowPopup] = useState(false);\n    const [message, setMessage] = useState(\"\");\n    const [formData, setFormData] = useState({\n        userName: \"\",\n        sid: \"\",\n        name: \"\",\n        department: \"\",\n        grade: \"\",\n        class: \"\",\n        Email: \"\",\n        absences: \"\",\n    });\n\n    const handleQuery = async () => {\n        try {\n            const data = await findBySid(sid);\n            if (data) {\n                setStudent(data);\n                setFormData({\n                    userName: data.userName || \"\",\n                    sid: data.sid || \"\",\n                    name: data.name || \"\",\n                    department: data.department || \"\",\n                    grade: data.grade || \"\",\n                    class: data.class || \"\",\n                    Email: data.Email || \"\",\n                    absences: data.absences || 0,\n                });\n                setShowPopup(true);\n                setMessage(\"\");\n            } else {\n                setMessage(\"查無此座號，請確認後再試！\");\n            }\n        } catch (error) {\n            setMessage(\"查詢失敗，請稍後再試！\");\n        }\n    };\n\n    const handleUpdate = async () => {\n        try {\n            const updatedData = {\n                id: student._id,\n                ...formData,\n            };\n            await updateStudentById(updatedData);\n            setMessage(\"學生資料更新成功！\");\n            setShowPopup(false);\n        } catch (error) {\n            setMessage(\"更新失敗，請稍後再試！\");\n        }\n    };\n\n    return (\n        <div className=\"form-container\">\n            {/* UI 保持不變 */}\n        </div>\n    );\n};\n\nexport default UpdateStudentForm;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,SAAS,EAAEC,iBAAiB,QAAQ,iBAAiB,CAAC,CAAC;AAChE,OAAO,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtB,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC5B,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAClC,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACe,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAAC;IACrCiB,QAAQ,EAAE,EAAE;IACZV,GAAG,EAAE,EAAE;IACPW,IAAI,EAAE,EAAE;IACRC,UAAU,EAAE,EAAE;IACdC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE,EAAE;IACTC,QAAQ,EAAE;EACd,CAAC,CAAC;EAEF,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACA,MAAMC,IAAI,GAAG,MAAMxB,SAAS,CAACM,GAAG,CAAC;MACjC,IAAIkB,IAAI,EAAE;QACNf,UAAU,CAACe,IAAI,CAAC;QAChBT,WAAW,CAAC;UACRC,QAAQ,EAAEQ,IAAI,CAACR,QAAQ,IAAI,EAAE;UAC7BV,GAAG,EAAEkB,IAAI,CAAClB,GAAG,IAAI,EAAE;UACnBW,IAAI,EAAEO,IAAI,CAACP,IAAI,IAAI,EAAE;UACrBC,UAAU,EAAEM,IAAI,CAACN,UAAU,IAAI,EAAE;UACjCC,KAAK,EAAEK,IAAI,CAACL,KAAK,IAAI,EAAE;UACvBC,KAAK,EAAEI,IAAI,CAACJ,KAAK,IAAI,EAAE;UACvBC,KAAK,EAAEG,IAAI,CAACH,KAAK,IAAI,EAAE;UACvBC,QAAQ,EAAEE,IAAI,CAACF,QAAQ,IAAI;QAC/B,CAAC,CAAC;QACFX,YAAY,CAAC,IAAI,CAAC;QAClBE,UAAU,CAAC,EAAE,CAAC;MAClB,CAAC,MAAM;QACHA,UAAU,CAAC,eAAe,CAAC;MAC/B;IACJ,CAAC,CAAC,OAAOY,KAAK,EAAE;MACZZ,UAAU,CAAC,aAAa,CAAC;IAC7B;EACJ,CAAC;EAED,MAAMa,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACA,MAAMC,WAAW,GAAG;QAChBC,EAAE,EAAEpB,OAAO,CAACqB,GAAG;QACf,GAAGf;MACP,CAAC;MACD,MAAMb,iBAAiB,CAAC0B,WAAW,CAAC;MACpCd,UAAU,CAAC,WAAW,CAAC;MACvBF,YAAY,CAAC,KAAK,CAAC;IACvB,CAAC,CAAC,OAAOc,KAAK,EAAE;MACZZ,UAAU,CAAC,aAAa,CAAC;IAC7B;EACJ,CAAC;EAED,oBACIV,OAAA;IAAK2B,SAAS,EAAC;EAAgB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAE1B,CAAC;AAEd,CAAC;AAAC7B,EAAA,CA5DID,iBAAiB;AAAA+B,EAAA,GAAjB/B,iBAAiB;AA8DvB,eAAeA,iBAAiB;AAAC,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}